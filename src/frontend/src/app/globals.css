@tailwind base;
@tailwind components;
@tailwind utilities;

/* ── CSS Custom Properties (Theme System) ────────── */
:root {
  --font-sans: var(--font-sora), 'Sora', system-ui, -apple-system, sans-serif;
  --font-mono: var(--font-jetbrains), 'JetBrains Mono', ui-monospace, monospace;

  /* Light theme */
  --bg-primary: #F8F9FA;
  --bg-secondary: #FFFFFF;
  --bg-sidebar: #FFFFFF;
  --bg-hover: rgba(197,224,238,0.06);

  --text-primary: #2D3333;
  --text-secondary: rgba(45,51,51,0.65);
  --text-tertiary: rgba(45,51,51,0.45);
  --text-muted: rgba(45,51,51,0.3);

  --border: rgba(197,224,238,0.3);
  --border-subtle: rgba(197,224,238,0.2);
  --border-strong: rgba(197,224,238,0.5);
  --border-warm: rgba(232,168,124,0.2);

  --accent: #C5E0EE;
  --accent-dark: #2D3333;
  --warm: #E8A87C;

  --success: #16a34a;
  --success-bg: rgba(22,163,74,0.08);
  --warning: #c07a4a;
  --warning-bg: rgba(232,168,124,0.1);
  --danger: #dc2626;
  --danger-bg: rgba(220,38,38,0.08);

  --card-shadow: 0 1px 3px rgba(0,0,0,0.02);
  --card-shadow-hover: 0 4px 16px rgba(197,224,238,0.12);
}

.dark {
  --bg-primary: #2D3333;
  --bg-secondary: rgba(197,224,238,0.03);
  --bg-sidebar: rgba(0,0,0,0.2);
  --bg-hover: rgba(197,224,238,0.04);

  --text-primary: #F8F9FA;
  --text-secondary: rgba(255,255,255,0.65);
  --text-tertiary: rgba(197,224,238,0.45);
  --text-muted: rgba(197,224,238,0.25);

  --border: rgba(197,224,238,0.1);
  --border-subtle: rgba(197,224,238,0.06);
  --border-strong: rgba(197,224,238,0.2);
  --border-warm: rgba(232,168,124,0.15);

  --accent: #C5E0EE;
  --accent-dark: #F8F9FA;
  --warm: #E8A87C;

  --success: #6ee7b7;
  --success-bg: rgba(110,231,183,0.1);
  --warning: #E8A87C;
  --warning-bg: rgba(232,168,124,0.1);
  --danger: #f87171;
  --danger-bg: rgba(248,113,113,0.1);

  --card-shadow: none;
  --card-shadow-hover: 0 4px 16px rgba(0,0,0,0.2);
}

/* ── Light Surface Override (overlays, modals, copilot) ── */
.light-surface {
  --bg-primary: #F8F9FA;
  --bg-secondary: #FFFFFF;
  --bg-hover: rgba(197,224,238,0.06);
  --text-primary: #2D3333;
  --text-secondary: rgba(45,51,51,0.65);
  --text-tertiary: rgba(45,51,51,0.45);
  --text-muted: rgba(45,51,51,0.3);
  --border: rgba(197,224,238,0.25);
  --border-subtle: rgba(197,224,238,0.15);
  --border-strong: rgba(197,224,238,0.4);
  --border-warm: rgba(232,168,124,0.2);
  --success: #16a34a;
  --success-bg: rgba(22,163,74,0.08);
  --warning: #c07a4a;
  --warning-bg: rgba(232,168,124,0.1);
  --danger: #dc2626;
  --danger-bg: rgba(220,38,38,0.08);
  --card-shadow: 0 1px 3px rgba(0,0,0,0.02);
}

/* ── Base Styles ─────────────────────────────────── */
html {
  font-family: var(--font-sans);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

body {
  background-color: var(--bg-primary);
  color: var(--text-primary);
  transition: background-color 0.2s, color 0.2s;
}

::selection {
  background-color: rgba(197,224,238,0.3);
  color: var(--text-primary);
}

::-webkit-scrollbar { width: 6px; height: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: rgba(197,224,238,0.3); border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: rgba(197,224,238,0.5); }

.tabular-nums { font-variant-numeric: tabular-nums; }

/* ── Utility Classes ─────────────────────────────── */
.focus-ring {
  @apply focus:outline-none focus:ring-1;
  --tw-ring-color: rgba(197,224,238,0.5);
}

/* ── Card Component ──────────────────────────────── */
.caelith-card {
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: 12px;
  box-shadow: var(--card-shadow);
  transition: border-color 0.2s, box-shadow 0.2s;
}
.caelith-card:hover {
  border-color: var(--border-strong);
  box-shadow: var(--card-shadow-hover);
}

/* ── Stat Card ───────────────────────────────────── */
.caelith-stat {
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 22px;
  box-shadow: var(--card-shadow);
  transition: border-color 0.2s, box-shadow 0.2s;
}
.caelith-stat:hover {
  border-color: var(--border-strong);
  box-shadow: var(--card-shadow-hover);
}
.caelith-stat.alert {
  border-left: 3px solid var(--warm);
  border-color: var(--border-warm);
}
.caelith-stat.alert:hover {
  border-color: rgba(232,168,124,0.4);
}

/* ── Badge ───────────────────────────────────────── */
.badge-pass { background: var(--success-bg); color: var(--success); padding: 2px 8px; border-radius: 4px; font-size: 11px; font-weight: 600; }
.badge-fail { background: var(--danger-bg); color: var(--danger); padding: 2px 8px; border-radius: 4px; font-size: 11px; font-weight: 600; }
.badge-warn { background: var(--warning-bg); color: var(--warning); padding: 2px 8px; border-radius: 4px; font-size: 11px; font-weight: 600; }

/* ── Compliance Bar ──────────────────────────────── */
.compliance-bar-track {
  flex: 1; height: 6px; border-radius: 3px; overflow: hidden;
  background: var(--border-subtle);
}
.compliance-bar-fill {
  height: 100%; border-radius: 3px;
  background: linear-gradient(90deg, #C5E0EE, #E8A87C);
}

/* ── Skeleton Loading ────────────────────────────── */
.skeleton {
  background: linear-gradient(90deg, var(--bg-secondary) 25%, var(--bg-hover) 50%, var(--bg-secondary) 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s ease-in-out infinite;
}
@keyframes shimmer {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

/* ── Table Scroll Wrapper ────────────────────────── */
.table-scroll-wrapper {
  position: relative;
  overflow-x: auto;
}
.table-scroll-wrapper::after {
  content: '';
  position: absolute;
  right: 0;
  top: 0;
  bottom: 0;
  width: 32px;
  pointer-events: none;
  background: linear-gradient(to right, transparent, var(--bg-secondary));
  opacity: 0;
  transition: opacity 0.2s;
}
.table-scroll-wrapper.has-overflow::after {
  opacity: 1;
}
.table-scroll-wrapper.scrolled-end::after {
  opacity: 0;
}

/* ── Sticky Table Headers ────────────────────────── */
.sticky-thead th {
  position: sticky;
  top: 0;
  z-index: 10;
  background-color: var(--bg-secondary);
}

/* ── Compact timestamps on mobile ────────────────── */
@media (max-width: 767px) {
  .timestamp-verbose { display: none; }
  .timestamp-compact { display: inline; }
}
@media (min-width: 768px) {
  .timestamp-verbose { display: inline; }
  .timestamp-compact { display: none; }
}
